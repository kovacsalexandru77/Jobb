<!DOCTYPE html>
<html lang="hu">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>JobbMintATv ‚Äì Sidebar + Player</title>

<!-- Bootstrap ikonok -->
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.5/font/bootstrap-icons.css">

<style>
/* ----- ALAP ----- */
body { margin:0; background:black; color:white; font-family:Arial; }

/* ----- FEJL√âC ----- */
header { 
  background: rgba(0,0,0,0.85); 
  padding:10px 20px; 
  display:flex;
  justify-content:flex-start;
  align-items:center;
  gap: 20px;
  position:sticky; 
  top:0; 
  z-index:1000;
  margin-left: 60px;
}
h1 { margin:0; color:cyan; font-size:22px; }
#categorySelect { 
  padding:6px 10px; 
  font-size:15px; 
  background:rgba(0,0,0,0.6);
  color:white; 
  border:2px solid cyan; 
  border-radius:6px; 
}

/* ----- FILM GRID ----- */
#movies { 
  display:grid; 
  grid-template-columns:repeat(5, 1fr);
  gap:15px; 
  padding:15px;
  margin-left: 60px;
}
.movie { 
  background:rgba(0,0,0,0.6); 
  border:2px solid deepskyblue; 
  border-radius:10px; 
  overflow:hidden; 
  cursor:pointer; 
  transition:0.3s; 
}
.movie:hover { transform:scale(1.05); box-shadow:0 0 15px cyan; }
.movie img { width:100%; height:240px; object-fit:cover; display:block; }
.movie-title { text-align:center; padding:8px; font-size:14px; color:cyan; }
/* üîµ DVD v√°laszt√°s neon f√©ny */
.movie:focus {
  outline: none; /* Elt√ºnteti a ronda narancss√°rga keretet */
  box-shadow: 0 0 20px cyan, 0 0 40px cyan; /* Neon f√©ny kijel√∂l√©skor */
  border-color: cyan;
  transform: scale(1.08); /* Kicsit kiemeli a v√°lasztott DVD-t */
}

.movie.selected {
  box-shadow: 0 0 25px cyan, 0 0 50px cyan;
  border-color: cyan;
  transform: scale(1.1);
}

/* ----- MODAL PLAYER ----- */
#playerModal { 
  position:fixed; 
  top:0; left:0; 
  width:100%; height:100%; 
  background:rgba(0,0,0,0.95); 
  display:none; 
  align-items:center; 
  justify-content:center; 
  flex-direction:column; 
  z-index:9999; 
}
#playerModal.show { display:flex; }

#playerIframe { 
  width:100%; 
  height:100%; 
  border:none; 
  background:black;
}

/* üîµ Kicsi X gomb a jobb als√≥ sarokban */
#closeBtn { 
  position:absolute; 
  bottom:20px; 
  right:30px; 
  font-size:20px;  
  color:white; 
  border-radius:50%; 
  padding:5px 10px; 
  cursor:pointer;
  transition: 0.3s;
}
#closeBtn:hover {
  background:red;
  box-shadow:0 0 15px #ff4040;
  transform: scale(1.1);
}

/* ----- LOAD MORE ----- */
#loadMoreBtn { 
  text-align:center; 
  padding:20px;
  margin-left: 60px;
}
#loadMoreBtn button { 
  padding:10px 20px; 
  font-size:16px; 
  background:cyan; 
  color:black; 
  border:none; 
  border-radius:8px; 
  cursor:pointer; 
  box-shadow:0 0 10px cyan; 
}
#loadMoreBtn button:hover { background:#00ffff; box-shadow:0 0 20px cyan; }

/* ----- SIDEBAR ----- */
/* ----- SIDEBAR ----- */
.sidebar {
  position: fixed;
  top: 0; 
  left: 0;
  height: 100%;
  width: 60px;
  background-color: transparent;
  display: flex;
  flex-direction: column;
  align-items: center;
  padding-top: 8px;   /* üîΩ kisebb fels≈ë marg√≥ */
  z-index: 1000;
}
.sidebar a {
  color: #00f7ff;
  font-size: 24px;
  margin: 8px 0;      /* üîΩ kisebb t√°vols√°g az ikonok k√∂z√∂tt */
  transition: transform 0.3s, color 0.3s, text-shadow 0.3s;
  text-decoration:none;
}
.sidebar a:hover {
  color: #ff00ff;
  transform: scale(1.3);
  text-shadow: 0 0 10px #ff00ff;
}

/* ----- √ìRA ----- */
.clock {
  position: fixed;
  top: 4px; 
  right: 17px;
  font-size: 16px;
  color: cyan !important;
  font-weight: bold;
  z-index: 1100;
  text-shadow: 0 0 8px cyan;
  padding: 2px 6px;
  border-radius: 4px;
}
</style>
</head>
<script>
const blockedErrors = [
  "PlayTV WEBPlayer Nem siker√ºlt bet√∂lteni a player oldalt",
  "Nem siker√ºlt bet√∂lteni a filmeket"
];

window.onerror = function(msg) {
  if (blockedErrors.some(err => msg.includes(err))) {
    return true; // ezeket a hib√°kat rejti el
  }
  return false; // minden m√°s hib√°t tov√°bb enged
};<
</script>
</head>

<body>

<!-- üîµ SIDEBAR ‚Äì 10 kateg√≥ria ikonokkal -->
<div class="sidebar">
  <a href="#" onclick="changeCategory('https://jobbmintatv.pro/filmek/1/1/drama/////')" title="Dr√°ma"><i class="bi bi-theater-masks"></i></a>
  <a href="#" onclick="changeCategory('https://jobbmintatv.pro/filmek/1/1/horror////')" title="Horror"><i class="bi bi-emoji-dizzy"></i></a>
  <a href="#" onclick="changeCategory('https://jobbmintatv.pro/filmek/1/1/misztikus/////')" title="Misztikus"><i class="bi bi-moon-stars"></i></a>
  <a href="#" onclick="changeCategory('https://jobbmintatv.pro/filmek/1/1/sci-fi/fantasy////')" title="Sci-Fi/Fantasy"><i class="bi bi-stars"></i></a>
  <a href="#" onclick="changeCategory('https://jobbmintatv.pro/filmek/1/1/sci-fi/////')" title="Sci-Fi"><i class="bi bi-rocket"></i></a>
  <a href="#" onclick="changeCategory('https://jobbmintatv.pro/filmek/1/1/bunugyi/////')" title="B≈±n√ºgyi"><i class="bi bi-shield-lock"></i></a>
  <a href="#" onclick="changeCategory('https://jobbmintatv.pro/filmek/1/1/thriller/////')" title="Thriller"><i class="bi bi-lightning"></i></a>
  <a href="#" onclick="changeCategory('https://jobbmintatv.pro/filmek/0/1/animacio///')" title="Anim√°ci√≥"><i class="bi bi-palette-fill"></i></a>
  <a href="#" onclick="changeCategory('https://jobbmintatv.pro/filmek/0/1/kaland////')" title="Kaland"><i class="bi bi-compass"></i></a>
  <a href="#" onclick="changeCategory('https://jobbmintatv.pro/filmek/0/1/akcio/////')" title="Akci√≥"><i class="bi bi-lightning-fill"></i></a>
  <a href="#" onclick="changeCategory('https://jobbmintatv.pro/filmek/1/1/vigjatek/////')" title="Vigjatek"><i class="bi bi-lightning-fill"></i></a>
</div>

<header>
  <select id="categorySelect" onchange="changeCategory(this.value)">
    <option value="https://jobbmintatv.pro/filmek/0/1/">√ñsszes kateg√≥ria</option>
    <option value="https://jobbmintatv.pro/filmek/1/1/drama/////">Dr√°ma</option>
    <option value="https://jobbmintatv.pro/filmek/1/1/horror////">Horror</option>
    <option value="https://jobbmintatv.pro/filmek/1/1/misztikus/////">Misztikus</option>
    <option value="https://jobbmintatv.pro/filmek/1/1/sci-fi/fantasy////">Sci-fi / Fantasy</option>
    <option value="https://jobbmintatv.pro/filmek/1/1/sci-fi/////">Sci-fi</option>
    <option value="https://jobbmintatv.pro/filmek/1/1/bunugyi/////">B≈±n√ºgyi</option>
    <option value="https://jobbmintatv.pro/filmek/1/1/thriller/////">Thriller</option>
    <option value="https://jobbmintatv.pro/filmek/0/1/animacio///">Anim√°ci√≥</option>
    <option value="https://jobbmintatv.pro/filmek/0/1/kaland////">Kaland</option>
    <option value="https://jobbmintatv.pro/filmek/0/1/akcio/////">Akci√≥</option>
    <option value="https://jobbmintatv.pro/filmek/1/1/vigjatek/////">Vigjatek</option>
  </select>

  <h1>J·¥è ô ôÍú∞…™ ü·¥ç·¥á·¥ã S·¥Ä…¥·¥Ö·¥ú‚ñ∂</h1>
 <div class="clock" id="clock">--:--:--</div>
</header>

<div id="movies"></div>
<div id="loadMoreBtn"><button onclick="loadMoreMovies()">T√∂bb film bet√∂lt√©se</button></div>
<div id="preloader"><div class="loader"></div></div>

<div id="playerModal">
  <iframe id="playerIframe" allowfullscreen allow="autoplay; fullscreen" referrerpolicy="no-referrer"></iframe>
  <div id="closeBtn" onclick="closeModal()">‚úï</div>
</div>

<script>
const proxy = "https://api.allorigins.win/get?url=";
let currentPage = 1;
let currentCategory = "https://jobbmintatv.pro/filmek/0";

function decodeHTMLEntities(text) {
  const txt = document.createElement('textarea');
  txt.innerHTML = text;
  return txt.value;
}

function updateClock() {
  const now = new Date();
  document.getElementById("clock").textContent = now.toLocaleTimeString("hu-HU", { hour12: false });
}
setInterval(updateClock, 1000);
updateClock();

function changeCategory(url) {
  currentCategory = url.replace(/\/1\/$/, '');
  currentPage = 1;
  document.getElementById("movies").innerHTML = "";
  document.getElementById("loadMoreBtn").innerHTML = '<button onclick="loadMoreMovies()">T√∂bb film bet√∂lt√©se</button>';
  fetchMovies(currentPage);
}

function loadMoreMovies() {
  currentPage++;
  fetchMovies(currentPage);
}

function fetchMovies(page = 1) {
  let url = currentCategory.includes("/1/") ? currentCategory.replace("/1/", "/" + page + "/") : currentCategory + "/" + page + "/";
  document.getElementById("preloader").style.display = "flex";

  fetch(proxy + encodeURIComponent(url))
    .then(res => res.text())
    .then(raw => {
      const data = JSON.parse(raw);
      const html = data.contents;
      const parser = new DOMParser();
      const doc = parser.parseFromString(html, "text/html");
      const items = doc.querySelectorAll(".eltesz_lista_bor");
      const container = document.getElementById("movies");

      if (items.length === 0) {
        document.getElementById("loadMoreBtn").innerHTML = "<p style='color:orange;'>Nincs t√∂bb film.</p>";
        document.getElementById("preloader").style.display = "none";
        return;
      }

      items.forEach(item => {
        const link = item.querySelector("a.kocka")?.getAttribute("href");
        const img = item.querySelector("img")?.getAttribute("src");
        let title = item.querySelector(".cimk")?.textContent.trim();
        title = decodeHTMLEntities(title);

        const extraInfo = item.querySelector(".egyebekk")?.textContent.trim() || "";
        const yearMatch = extraInfo.match(/\b(19|20)\d{2}\b/);
        const year = yearMatch ? yearMatch[0] : "";

        if (link && img && title) {
          const div = document.createElement("div");
          div.className = "movie";

          const imgEl = document.createElement("img");
          imgEl.src = img.startsWith("//") ? "https:" + img : img;
          imgEl.alt = title;

          const titleDiv = document.createElement("div");
          titleDiv.className = "movie-title";
          titleDiv.innerHTML = year 
            ? `<span class="title-text">${title}</span> <span class="year-text">(${year})</span>` 
            : `<span class="title-text">${title}</span>`;

          div.appendChild(imgEl);
          div.appendChild(titleDiv);
          container.appendChild(div);

          div.onclick = () => loadPlayer("https:" + link, title);
        }
      });

      document.getElementById("preloader").style.display = "none";
    })
    .catch(err => {
      console.error("Hiba:", err);
      document.getElementById("preloader").style.display = "none";
    });
}

function loadPlayer(link, title) {
  document.getElementById("preloader").style.display = "flex";

  fetch(proxy + encodeURIComponent(link))
    .then(res => res.text())
    .then(raw => {
      const data = JSON.parse(raw);
      const html = data.contents;
      const doc = new DOMParser().parseFromString(html, "text/html");

      const iframe = doc.querySelector(
        'iframe[src*="ok.ru"], iframe[src*="videa"], iframe[src*="mozimix"], iframe[src*="picture"], iframe[src*="filemoon.sx"], iframe[src*="waaw.to"]'
      );

      if (iframe) {
        let src = iframe.getAttribute("src");
        if (src.startsWith("//")) src = "https:" + src;
        if (!src.includes("autoplay=1")) {
          src += (src.includes("?") ? "&" : "?") + "autoplay=1";
        }

        document.getElementById("playerIframe").src = src;
        document.getElementById("playerModal").style.display = "flex";
      } else {
        alert("Ehhez a filmhez nem tal√°ltunk t√°mogatott lej√°tsz√≥t.");
      }

      document.getElementById("preloader").style.display = "none";
    })
    .catch(err => {
      console.error("Hiba:", err);
      document.getElementById("preloader").style.display = "none";
    });
}

function closeModal() {
  document.getElementById("playerModal").style.display = "none";
  document.getElementById("playerIframe").src = "";
}

fetchMovies(currentPage);
</script>
</body>
</html>
